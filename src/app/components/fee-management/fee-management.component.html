<!-- Fee Management Page Template -->
<div class="fee-management-container" style="width:100%; max-width:900px; margin:auto;">
  <!-- Header and Export Button Row -->
  <div style="display:flex; justify-content:space-between; align-items:center; padding-bottom: 16px;">
    <h2 style="font-size: 1.5em;">Fee Management</h2>
    <button (click)="exportToCSV()" style="background:#1976d2; color:#fff; border:none; padding:8px 16px; border-radius:4px; cursor:pointer;">Export to CSV</button>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-message" style="color: #b71c1c; background: #fce4ec; border-radius:4px; padding:14px;">
    {{ errorMessage }}
  </div>

  <!-- Fee Categories -->
  <div *ngFor="let category of feeCategories" class="fee-category-block" style="margin-bottom: 24px; border:1px solid #dedede; border-radius:6px;">
    <div style="padding:16px;">
      <div style="font-weight:700; font-size:1.1em; margin-bottom:10px;">{{ category.category }}</div>
      <!-- Fee Items Table -->
      <div *ngIf="category.fees && category.fees.length > 0; else noFees">
        <table style="width:100%; border-collapse:collapse;">
          <thead>
            <tr style="background:#f5f5f5;">
              <th style="padding:8px; border-bottom:1px solid #ccc;">Fee Name</th>
              <th style="padding:8px; border-bottom:1px solid #ccc;">Amount</th>
              <th style="padding:8px; border-bottom:1px solid #ccc;">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let fee of category.fees" style="border-bottom:1px solid #eee;">
              <td style="padding:8px;">{{ fee.name }}</td>
              <td style="padding:8px;">{{ fee.amount | currency }}</td>
              <td style="padding:8px;">{{ fee.description }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <ng-template #noFees>
        <div class="no-fees-block" style="padding:20px; color:#888; text-align:center;">
          No fees in this category.
        </div>
      </ng-template>
    </div>
  </div>
</div>
